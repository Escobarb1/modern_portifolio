<!DOCTYPE html>
<html>
    <head>
        <title>js borrowing methods</title>
    </head>
    <body>
        <script>
            var obja = {
                name: "object a",
                say: function(greet) {
                    alert(greet + ", " + this.name);
                }
            }

            obja.say("hi");

            var objb = {
                name: "object b"
            }
            obja.say.call(objb, "Hello");
        </script> 

        <script>
            var obja = {
                name: "object a",
                say: function(greet) {
                    alert(greet + ", " + this.name);
                }
            }

            obja.say("hi");

            var objb = {
                name: "object b"
            }
            obja.say.apply(objb, ["Hello"]);
        </script>

        <script>
            var numbers = [2, 5, 6, 4, 3, 7];
            //using math.max apply
            var max = Math.max.apply(null, numbers);
            alert(max);
        </script>

        <script>
            var numbers = [2, 5, 6, 4, 3, 7];
            //using reduce method
            var max = numbers.reduce(function(a, b) {
                return Math.max(a, b);
            })
            alert(max);
        </script>

                                               <!--Function hoisting  -->

        <script>
            //function  hoisting
            //calling function before declaration
            sayHello();
            function sayHello() {
                alert("Hello, I'm hoisted!");
            }
        </script> 

        <script>
            //variable hoisting
            str = "Hello World!";
            alert(str);
            var str;
        </script>

        <script>
            alert(str);
            var str;
            str = "Hello World!";
        </script>

        <script>
            var i = 1;
            alert(i + ", " + j);
            var j = 2;

            var x = 5;
            var y;
            alert(x + ", " + y);
            y = 10;

            var a = 3;
            b = 6;
            alert(a + ", " + b);
            var b;

            var u = 4;
            alert(u + ", " + v);
            var v;
            v = 8;

            var x = 20;
            y = 4;
            var y;
            alert(x + ", " + y);
        </script>
                                                 <!-- JavaScript Closures -->

        <script>
            //Global variable
            var counter = 0;
            //a function dedicated to manipulate the 'counter' variable
            function makeCounter() {
                return counter += 1;
            }
            //calling the function
            makeCounter();
            console.log(counter);

            makeCounter();
            console.log(counter);

            //trying to manipulate the 'counter' variable from outside
            counter = 10;
            console.log(counter);
        </script> 

        <script>
            function makeCounter() {
                //local variable
                var counter = 20;
                //manipulating the 'counter' variable
                return counter += 1;
            }
            //calling the function
            console.log(makeCounter());
            console.log(makeCounter());
        </script>

        <script>
            function makeCounter() {
                var counter = 0;
                //Nested function
                function make() {
                    counter += 1;
                    return counter;
                }
                return make;
            }

            var myCounter = makeCounter();

            console.log(myCounter());
            console.log(myCounter());
        </script>

        <script>
            //Anonymous function expression
            var myCounter = (function(){
                var counter = 0;
                //Nested anonymous function
                return function() {
                    counter += 1;
                    return counter;
                }
            })();
            console.log(myCounter());
            console.log(myCounter());
        </script>

        <script>
            var getValue, setValue;
            //self-executing function
            (function() {
                var secret = 0;
                //getter function
                getValue = function() {
                    return secret;
                };
                //setter function
                setValue = function(x) {
                    if(typeof x === "number"){
                        secret = x;
                    }
                };
            });

            //calling the functions
            getValue();
            getValue(10);
            getValue();
            getValue(null);
            getValue();
        </script>
                                                <!-- Javascript strict mode -->

        <script>
            "use strict";
            //All your code goes here
            x = 5;
            console.log(x);//reference error:x is undefined
        </script> 

        <script>
            x = 5;
            console.log(x);//5

            function sayHello(){
                "use strict";
                str = "Hello World!";
                console.log(str);
            }
            sayHello();
        </script>

        <script>
            "use strict";
            function doSomething() {
                msg = "Hi, there!";
                return msg;
            } 
            console.log(doSomething());
        </script>

        <script>
            "use strict";
            function sum(a, b) {
                return a + b;
            }
            delete sum;//syntaxerror
        </script>

        <script>
            "use strict";
            function square(a, a) {//syntaxerror
                return a * a;
            }
            console.log(square(2, 2));
        </script>

        <script>
            "use strict";
            eval("var x = 5;");
            console.log(x);//ReferenceError: x is not defined
        </script>

        <script>
            "use strict";
            var eval = 10;//syntaxerror
            console.log(eval);
        </script>

        <script>
            "use strict";
            //without with statement
            var radius1 = 5;
            var area1 = Math.PI * radius1 * radius1;
            //using with statement
            var radius2 = 5;
            with(Math) {//syntaxerror
                var area2 = PI * radius2 * radius2;
            }
        </script>

        <script>
            "use strict";
            var person = {name: "Peter", age: 28};
            Object.defineProperty(person, "gender", {value: "male", writable: "false"});
            person.gender = "female";//Typeerror
        </script>

        <script>
            "use strict";
            var person = {name: "peter", age: 28};
            console.log(Object.isExtensible(person));
            Object.freeze(Object.isExtensible(person));
            person.gender = "male";
        </script>

            

                                                    <!-- JS JSON PARSING -->


        <script>
            //storing  multi-line JSON string in a JS variable using the new ES6 template literials
            var json = {
                "book":{
                    "name": "Harry Potter and the Globlet of fire",
                    "author": "J, K. Rowling",
                    "year": 2000,
                    "genre": "Fantasy Fiction",
                    "bestseller": true
                }
            };
            var obj = JSON.parse(json);
            console.log(obj);
        </script>

        <script>
            //storing  multi-line JSON string in a JS variable using the new ES6 template literials
            var json = {
                "fruits": [
                    "Apple",
                    "Banana",
                    "Strawberry",
                    "Mango"
                ]
            };
            var obj = JSON.parse(json);
            console.log(obj);
        </script>

        <script>
            var json = {"name": "peter", "age": 22, "country": "Nigeria"};
            var obj = JSON.parse(json);
            console.log(obj);
        </script>

        <script>
            //store JSON data in a JS variable
            var json = '{"name": "Peter", "age": 22, "country": "Nigeria"}';
            //converting JSON-encoded string to JS object
            var obj = JSON.parse(json);
            //Acessing individual value from JS object
            alert(obj.name);
            alert(obj.age);
            alert(obj.country);
        </script>

        <script>
            //storing muti-line JSON string in a JS variable using the new ES6 template literals
            var json = `{
                "book": {
                    "name": "Harry potter and Goblet of fire",
                    "author": "J. K. Rowling",
                    "year": 2000,
                    "characters": ["Harry Potter", "Hermione Granger", "Ron Weasley"],
                    "genre": "Fantasy Fiction",
                "price": {
                    "paperback": "$10.40", "hardcover": "$20.32", "kindle": "$4.11"
                    }
                }
            }`;
            //converting JSON object to JS object
            var obj = JSON.parse(json);

            //define recursive function to print nested values
            function printValues(obj) {
                for(var k in obj) {
                    if(obj[k] instanceof Object) {
                        printValues(obj[k]);
                    }
                    else{
                        document.write(obj[k] + "<br>");
                    };
                }
            };
            //Printing all the values from the resulting object
            printValues(obj);
            document.write("<hr>");
            //Printing a single value
            document.write(obj["book"]["author"] + "<br>");
            document.write(obj["book"]["characters"][0] + "<br>");
            document.write(obj["book"]["price"]["hardcover"]);
        </script>

        <script>
            //sample JS object
            var obj = {"name": "Peter", "age": 22, "country": "Nigeria"};
            //converting JS object to JSON string
            var json = JSON.stringify(obj);
            alert(json);
        </script>
        
        <script>
            //sample js array
            var arr = ["Apple", "Banana", "Mango", "Papaya"];
            //converting JS array to JSON string
            var json = JSON.stringify(arr);
            alert(json);
        </script>


                                                <!-- JS ERROR HANDLING -->
        
        <script>
            try{
                var greet = "Hi, there!";
                document.write(greet);

                //Trying to access a non-existent variable
                document.write(welcome);

                //if error occurred following line won't execute
                alert("All statements are executed successfully.");
            }
            catch(error){
                //Handle the error
                alert("Caught error: " + error.message);z
            }
            //Continue execution
            document.write("<p>Hello World!</p>");
        </script> 

        <script>
            //Assigning the value return by the prompt dialog box to a variable
            var num = prompt("Enter a positive integer between 0 to 100");
            //storing the time when execution start
            var start = Date.now();
            try{
                if(num > 0 && num <= 100){
                    alert(Math.pow(num, num));//all the base to the exponent power
                }
                else{
                    throw new Error("An invalid value is entered!");
                }
            } 
            catch(e){
                alert(e.message);
            }
            finally{
                //display the time taken to execute the code
                alert("Execution took: " + (Date.now() - start) + "ms");
            }
        </script>

        <script>
            function squareRoot(number){
                //throw error if number is negative
                if(number < 0) {
                    throw new Error("Sorry, can't calculate squareroot of a negative number.");
                }
                else{
                    return Math.sqrt(number);
                }
            }
            try {
                squareRoot(16);
                squareRoot(625);
                squareRoot(-9);
                squareRoot(100);
                //if error is thrown following line won't executive
                alert("All calculations are performed successfully.");
            }
            catch(e){
                //handle the error
                alert(e.message);
            }
        </script>

        <script>
            //RangeError
            var num = 12.735;
            try {
                num.toFixed(200);//throws a range error (allowable range from 0 to 100)
            }
            catch(e){ 
                document.write(e.name + ": " + e.message);
            }
        </script>

        <script>
            //ReferenceError
            var firstName = "Harry";
            try{
                document.write(firstName);//throws a reference error (variable names are case-sensitive)
            }
            catch(e) {
                document.write(e.name + ": " + e.message);
            }
        </script>

        <script>
            //TypeError
            var num = 123;
            try{
                num.toLowerCase();//throws a typeerror (since toLowerCase() is a string method, a number can't be converted to lowercase)
            }
            catch(e) {
                document.write(e.name + ": " + e.message);
            }
        </script>

        <script>
            //URIError
            var a = "%E6%A2%B";
            try{ 
               decodeURI(a);//throws a URI error
            }
            catch(e) {
                document.write(e.name + ": " + e.message);
            }
        </script>

        <script>
            var num = prompt("Please enter a number");
            try{
                if(num != "" && num !== null && isFinite(+num)) {
                    alert(Math.exp(num));
                } else {
                    throw new TypeError("You have not entered a number.");
                    }
            } catch(e) {
                alert(e.name);
                alert(e.message);
                alert(e.stack);//non-standard property
            }
        </script>


                                                <!-- JS REGULAR EXPRESSION -->


        <script>
            //literal syntax
            var regex = /^Mr\./;
            //constructor syntax
            var regex = new RegExp("^Mr\\.");
        </script> 

        <script>
            var regex = /ca[kf]e/;
            var str = "He was eating cake in the cafe.";
            //Test the string against the regular expression
            if(regex.test(str)){
                alert("Match found!");
            } else {
                alert("Match not found.");
            }
        </script>

        <script>
            var regex = /\s/g;
            var replacement = "-";
            var str = "Earth revolves around\nthe\tSun";

            //Replace spaces, newlines and tab
            document.write(str.replace(regex, replacement) + "<hr>");
            //replace only spaces
            document.write(str.replace(/ /g, "-"));
        </script>

        <script>
            var regex = /[\s,]+/;
            var str = "My favourite color are red, green and blue";
            var parts = str.split(regex);
            //loop through parts array and display substring
            for(var part of parts){
                document.write("<p>" + part + "</p>");
            }
        </script>

        <script>
            var regex = /^J/;
            var names = ["James Bond", "Clark Kent", "John Rambo"];
            //loop through names array and display matched names
            for(var name of names) {
                if(regex.test(name)){
                    document.write("<p>" + name + "</p>")
                }
            }
        </script>

        <script>
            var regex = /color/gi;
            var str = "Color red is more visible then color blue in daylight.";
            var matches = str.match(regex);
            console.log(matches);
        </script>

        <script>
            var regex = /^color/gim;
            var str = "Color red is more visible than \ncolor blue in daylight.";s
            var matches = str.match(regex);
            console.log(matches);
        </script>

        <script>
            var regex = /fox|dog|cat/;
            var str = "The quick brown fox jumps over the lazy dog.";
            var matches = str.match(regex);
            console.log(matches);
        </script>

        <script>
            var regex = /(go)+/i;
            var str = "One day Gogo will go to school.";
            var matches = str.match(regex);
            console.log(matches);
        </script>-->


        <script>
            var regex = /(\bcar\w*)/g;
            var str = "Words begining with car: cart, carrot,cartoon. Words ending with car: oscar, supercar.";
            var replacement = '<b>$1</b>';
            var result = str.replace(regex, replacement);
            document.write(result);
        </script>
    </body>
</html>